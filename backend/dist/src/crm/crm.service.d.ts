import { PrismaService } from '../prisma/prisma.service';
import { CreateLeadDto } from './dto/create-lead.dto';
import { CreatePipelineDto } from './dto/create-pipeline.dto';
import { NotificationsService } from '../notifications/notifications.service';
import { CrmGateway } from './crm.gateway';
export declare class CrmService {
    private prisma;
    private readonly notificationsService?;
    private readonly crmGateway?;
    constructor(prisma: PrismaService, notificationsService?: NotificationsService | undefined, crmGateway?: CrmGateway | undefined);
    createPipeline(tenantId: string, data: CreatePipelineDto): Promise<{
        stages: ({
            leads: {
                id: string;
                email: string | null;
                name: string;
                tenantId: string;
                customerId: string | null;
                phone: string | null;
                createdAt: Date;
                updatedAt: Date;
                company: string | null;
                source: string | null;
                status: string;
                score: number;
                value: number | null;
                isWhatsappArchived: boolean;
                assigneeId: string | null;
                pipelineId: string;
                stageId: string;
                facebookFormId: string | null;
            }[];
        } & {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        })[];
    } & {
        id: string;
        name: string;
        tenantId: string;
        customerId: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    findAllPipelines(tenantId: string, user: any): Promise<({
        stages: ({
            leads: ({
                assignee: {
                    id: string;
                    email: string;
                    emailVerifiedAt: Date | null;
                    password: string;
                    name: string | null;
                    avatar: string | null;
                    role: string;
                    tenantId: string;
                    customerId: string | null;
                    salary: number | null;
                    iban: string | null;
                    phone: string | null;
                    phoneVerifiedAt: Date | null;
                    startDate: Date | null;
                    isActive: boolean;
                    tckn: string | null;
                    address: string | null;
                    birthDate: Date | null;
                    jobTitle: string | null;
                    department: string | null;
                    emergencyContactName: string | null;
                    emergencyContactPhone: string | null;
                    bankName: string | null;
                    bankBranch: string | null;
                    bankAccountNumber: string | null;
                    maritalStatus: string | null;
                    childrenCount: number | null;
                    bloodType: string | null;
                    educationLevel: string | null;
                    contractType: string | null;
                    socialSecurityNumber: string | null;
                    taxNumber: string | null;
                    weeklyHours: number | null;
                    probationMonths: number | null;
                    confidentialityYears: number | null;
                    nonCompeteMonths: number | null;
                    penaltyAmount: number | null;
                    equipmentList: string | null;
                    benefits: string | null;
                    performancePeriod: string | null;
                    workplace: string | null;
                    bonusPolicy: string | null;
                    leavePolicy: string | null;
                    noticePeriodWeeks: number | null;
                    allowedModules: string | null;
                    createdAt: Date;
                    updatedAt: Date;
                } | null;
            } & {
                id: string;
                email: string | null;
                name: string;
                tenantId: string;
                customerId: string | null;
                phone: string | null;
                createdAt: Date;
                updatedAt: Date;
                company: string | null;
                source: string | null;
                status: string;
                score: number;
                value: number | null;
                isWhatsappArchived: boolean;
                assigneeId: string | null;
                pipelineId: string;
                stageId: string;
                facebookFormId: string | null;
            })[];
        } & {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        })[];
    } & {
        id: string;
        name: string;
        tenantId: string;
        customerId: string | null;
        createdAt: Date;
        updatedAt: Date;
    })[]>;
    findPipeline(tenantId: string, id: string, user: any): Promise<({
        stages: ({
            leads: ({
                assignee: {
                    id: string;
                    email: string;
                    emailVerifiedAt: Date | null;
                    password: string;
                    name: string | null;
                    avatar: string | null;
                    role: string;
                    tenantId: string;
                    customerId: string | null;
                    salary: number | null;
                    iban: string | null;
                    phone: string | null;
                    phoneVerifiedAt: Date | null;
                    startDate: Date | null;
                    isActive: boolean;
                    tckn: string | null;
                    address: string | null;
                    birthDate: Date | null;
                    jobTitle: string | null;
                    department: string | null;
                    emergencyContactName: string | null;
                    emergencyContactPhone: string | null;
                    bankName: string | null;
                    bankBranch: string | null;
                    bankAccountNumber: string | null;
                    maritalStatus: string | null;
                    childrenCount: number | null;
                    bloodType: string | null;
                    educationLevel: string | null;
                    contractType: string | null;
                    socialSecurityNumber: string | null;
                    taxNumber: string | null;
                    weeklyHours: number | null;
                    probationMonths: number | null;
                    confidentialityYears: number | null;
                    nonCompeteMonths: number | null;
                    penaltyAmount: number | null;
                    equipmentList: string | null;
                    benefits: string | null;
                    performancePeriod: string | null;
                    workplace: string | null;
                    bonusPolicy: string | null;
                    leavePolicy: string | null;
                    noticePeriodWeeks: number | null;
                    allowedModules: string | null;
                    createdAt: Date;
                    updatedAt: Date;
                } | null;
            } & {
                id: string;
                email: string | null;
                name: string;
                tenantId: string;
                customerId: string | null;
                phone: string | null;
                createdAt: Date;
                updatedAt: Date;
                company: string | null;
                source: string | null;
                status: string;
                score: number;
                value: number | null;
                isWhatsappArchived: boolean;
                assigneeId: string | null;
                pipelineId: string;
                stageId: string;
                facebookFormId: string | null;
            })[];
        } & {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        })[];
    } & {
        id: string;
        name: string;
        tenantId: string;
        customerId: string | null;
        createdAt: Date;
        updatedAt: Date;
    }) | null>;
    deletePipeline(tenantId: string, id: string): Promise<{
        id: string;
        name: string;
        tenantId: string;
        customerId: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    createStage(tenantId: string, pipelineId: string, data: {
        name: string;
        color?: string;
        order?: number;
    }): Promise<{
        id: string;
        name: string;
        createdAt: Date;
        updatedAt: Date;
        pipelineId: string;
        order: number;
        color: string | null;
    }>;
    updateStage(tenantId: string, id: string, data: {
        name?: string;
        color?: string;
        order?: number;
    }): Promise<{
        id: string;
        name: string;
        createdAt: Date;
        updatedAt: Date;
        pipelineId: string;
        order: number;
        color: string | null;
    }>;
    deleteStage(tenantId: string, id: string): Promise<{
        id: string;
        name: string;
        createdAt: Date;
        updatedAt: Date;
        pipelineId: string;
        order: number;
        color: string | null;
    }>;
    createLead(tenantId: string, data: CreateLeadDto): Promise<{
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }>;
    findAllLeads(tenantId: string, user: any, pipelineId?: string): Promise<({
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    })[]>;
    findWhatsappConversations(tenantId: string, user: any, includeArchived?: boolean): Promise<{
        id: any;
        name: any;
        phone: any;
        stage: any;
        pipeline: any;
        assignee: any;
        lastWhatsappActivity: any;
        hasNewMessage: any;
        isWhatsappArchived: any;
    }[]>;
    private getAllowedFormIds;
    findLead(tenantId: string, id: string): Promise<({
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            stages: {
                id: string;
                name: string;
                createdAt: Date;
                updatedAt: Date;
                pipelineId: string;
                order: number;
                color: string | null;
            }[];
        } & {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
        activities: ({
            user: {
                name: string | null;
                avatar: string | null;
            } | null;
        } & {
            id: string;
            tenantId: string;
            createdAt: Date;
            status: string | null;
            userId: string | null;
            type: string;
            externalId: string | null;
            content: string;
            leadId: string;
            reminderDate: Date | null;
            isReminderSent: boolean;
        })[];
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }) | null>;
    updateLead(tenantId: string, id: string, data: any): Promise<{
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }>;
    moveLead(tenantId: string, leadId: string, stageId: string): Promise<{
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }>;
    deleteLead(tenantId: string, id: string): Promise<{
        id: string;
    }>;
    setWhatsappConversationArchived(tenantId: string, leadId: string, archived: boolean): Promise<({
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }) | null>;
    assignLead(tenantId: string, leadId: string, assigneeId: string | null): Promise<{
        assignee: {
            id: string;
            email: string;
            emailVerifiedAt: Date | null;
            password: string;
            name: string | null;
            avatar: string | null;
            role: string;
            tenantId: string;
            customerId: string | null;
            salary: number | null;
            iban: string | null;
            phone: string | null;
            phoneVerifiedAt: Date | null;
            startDate: Date | null;
            isActive: boolean;
            tckn: string | null;
            address: string | null;
            birthDate: Date | null;
            jobTitle: string | null;
            department: string | null;
            emergencyContactName: string | null;
            emergencyContactPhone: string | null;
            bankName: string | null;
            bankBranch: string | null;
            bankAccountNumber: string | null;
            maritalStatus: string | null;
            childrenCount: number | null;
            bloodType: string | null;
            educationLevel: string | null;
            contractType: string | null;
            socialSecurityNumber: string | null;
            taxNumber: string | null;
            weeklyHours: number | null;
            probationMonths: number | null;
            confidentialityYears: number | null;
            nonCompeteMonths: number | null;
            penaltyAmount: number | null;
            equipmentList: string | null;
            benefits: string | null;
            performancePeriod: string | null;
            workplace: string | null;
            bonusPolicy: string | null;
            leavePolicy: string | null;
            noticePeriodWeeks: number | null;
            allowedModules: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        pipeline: {
            id: string;
            name: string;
            tenantId: string;
            customerId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        stage: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            pipelineId: string;
            order: number;
            color: string | null;
        };
    } & {
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        customerId: string | null;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
        company: string | null;
        source: string | null;
        status: string;
        score: number;
        value: number | null;
        isWhatsappArchived: boolean;
        assigneeId: string | null;
        pipelineId: string;
        stageId: string;
        facebookFormId: string | null;
    }>;
    addActivity(tenantId: string, leadId: string, userId: string | null, data: {
        type: string;
        content: string;
        reminderDate?: string;
        status?: string;
        externalId?: string;
        createdAt?: string;
    }): Promise<{
        id: string;
        tenantId: string;
        createdAt: Date;
        status: string | null;
        userId: string | null;
        type: string;
        externalId: string | null;
        content: string;
        leadId: string;
        reminderDate: Date | null;
        isReminderSent: boolean;
    }>;
    updateActivity(tenantId: string, id: string, data: {
        status?: string;
        content?: string;
    }): Promise<{
        id: string;
        tenantId: string;
        createdAt: Date;
        status: string | null;
        userId: string | null;
        type: string;
        externalId: string | null;
        content: string;
        leadId: string;
        reminderDate: Date | null;
        isReminderSent: boolean;
    }>;
    checkReminders(): Promise<void>;
    convertToCustomer(tenantId: string, leadId: string): Promise<{
        id: string;
        email: string | null;
        name: string;
        tenantId: string;
        phone: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    recalculateLeadScores(tenantId: string): Promise<{
        message: string;
    }>;
}
